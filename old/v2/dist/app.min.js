!function(){"use strict";angular.module("app",["ngMaterial","blocks.router","twang"])}(),function(){"use strict";angular.module("blocks.router",["ui.router"])}(),function(){"use strict";angular.module("blocks.twitch",[])}(),function(){"use strict";angular.module("blocks.user",[])}(),function(){"use strict";angular.module("twang.channels",["blocks.user","blocks.twitch"])}(),function(){"use strict";angular.module("twang.dashboard",["blocks.user","blocks.twitch"])}(),function(){"use strict";angular.module("twang.games",["blocks.user","blocks.twitch"])}(),function(){"use strict";angular.module("twang",["twang.dashboard","twang.channels","twang.games"])}(),function(){"use strict";function t(t){t.icon("menu","images/menu.svg",24)}angular.module("app").config(t),t.$inject=["$mdIconProvider"]}(),function(){"use strict";function t(t){t.theme("default").primaryPalette("grey")}angular.module("app").config(t),t.$inject=["$mdThemingProvider"]}(),function(){"use strict";function t(t){t.otherwise("/dashboard")}angular.module("app").config(t),t.$inject=["$urlRouterProvider"]}(),function(){"use strict";angular.module("app").constant("twitchConfig",{"Client-ID":"7ikopbkspr7556owm9krqmalvr2w0i4"})}(),function(){"use strict";function t(t){t.caseInsensitive(!0),t.strictMode(!1)}angular.module("blocks.router").config(t),t.$inject=["$urlMatcherFactoryProvider"]}(),function(){"use strict";function t(t){function e(e){return t.get("channels/"+e)}return{getByName:e}}angular.module("blocks.twitch").factory("blocks.twitch.channels",t),t.$inject=["blocks.twitch.client"]}(),function(){"use strict";function t(t,e){function n(e,n){function r(t){return t.data}return t.get(a(e,n),s).then(r)}function a(t,e){var n="https://api.twitch.tv/kraken/"+t;return n+r(e)}function r(t){var e=Object.keys(t||{});return 0===e.length?"":"?"+e.map(function(e){return o(e,t[e])}).filter(function(t){return!!t}).join("&")}function o(t,e){return t&&e?encodeURIComponent(t)+"="+encodeURIComponent(e):null}var s={headers:{Accept:"application/vnd.twitchtv.v5+json","Client-ID":e["Client-ID"]}};return{get:n}}angular.module("blocks.twitch").factory("blocks.twitch.client",t),t.$inject=["$http","twitchConfig"]}(),function(){"use strict";function t(t){function e(t,e,n){return r("search/channels",t,e,n)}function n(t,e,n){return r("search/streams",t,e,n)}function a(t,e,n){return r("search/games",t,e,n)}function r(e,n,a,r){function o(t){return t.channels||t.streams||t.games}var s={query:n,limit:a,offset:r};return t.get(e,s).then(o)}return{channels:e,streams:n,games:a}}angular.module("blocks.twitch").factory("blocks.twitch.search",t),t.$inject=["blocks.twitch.client"]}(),function(){"use strict";function t(t){function e(e,n,a){var r={game:e,limit:n,offset:a,stream_type:"live"};return t.get("streams",r)}function n(e,n,a){var r={channel:e,limit:n,offset:a,stream_type:"live"};return t.get("streams",r)}return{getByGame:e,getByChannel:n}}angular.module("blocks.twitch").factory("blocks.twitch.streams",t),t.$inject=["blocks.twitch.client"]}(),function(){"use strict";function t(t,e){function n(){return g(d(h))}function a(t){return i(h,f,t)}function r(t){return l(h,f,t)}function o(){return g(d(v))}function s(t){return i(v,f,t)}function c(t){return l(v,f,t)}function i(t,e,n){var a=d(t);return m(a,n,e)<0&&(a.push(n),u(t,a)),g(a)}function l(t,e,n){var a=d(t),r=m(a,n,e);return r>=0&&(a.splice(r,1),u(t,a)),g(a)}function m(t,e,n){var a=t.map(function(t){return t[n]});return a.indexOf(e[n])}function d(e){var n=t.localStorage[e]||"[]";return JSON.parse(n)}function u(e,n){t.localStorage[e]=JSON.stringify(n)}function g(t){var n=e.defer();return n.resolve(t),n.promise}var h="twang.channels",v="twang.games",f="name";return{getChannels:n,addChannel:a,removeChannel:r,getGames:o,addGame:s,removeGame:c}}angular.module("blocks.user").factory("blocks.user.service",t),t.$inject=["$window","$q"]}(),function(){"use strict";function t(t,e,n,a,r){function o(){return n.getChannels().then(s)}function s(t){m.channels=t}function c(t){return a.channels(t)}function i(t){if(t)return n.addChannel(t).then(s).then(function(){return e.showSimple(t.display_name+" added")})}function l(t){if(t)return n.removeChannel(t).then(s).then(function(){return e.showSimple(t.display_name+" removed")})}var m=this;m.channels=[],m.search=c,m.add=i,m.remove=l,o()}angular.module("twang.channels").controller("twang.channels.controller",t),t.$inject=["$q","$mdToast","blocks.user.service","blocks.twitch.search","blocks.twitch.channels"]}(),function(){"use strict";function t(t){t.state("twang.channels",{url:"/channels",views:{"content@":{templateUrl:"app/twang/channels/channels.html",controller:"twang.channels.controller",controllerAs:"vm"}},data:{title:"Channels"}})}angular.module("twang.channels").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(){var t={restrict:"E",replace:!1,scope:{},templateUrl:"app/twang/dashboard/dashboard.channel.list.html",controller:e,controllerAs:"vm",bindToController:!0};return t}function e(t,e){function n(){return t.getChannels().then(a)}function a(t){if(!t||0===t.length)return[];var n="";return t.forEach(function(t){n+=t._id+","}),e.getByChannel(n,t.length,0).then(r)}function r(t){o.streams=t.streams}var o=this;o.streams=[],n()}angular.module("twang.dashboard").directive("dashboardChannelList",t),e.$inject=["blocks.user.service","blocks.twitch.streams"]}(),function(){"use strict";function t(t){function e(){return t.getGames().then(function(t){n.games=t})}var n=this;n.channels=[],n.games=[],e()}angular.module("twang.dashboard").controller("twang.dashboard.controller",t),t.$inject=["blocks.user.service"]}(),function(){"use strict";function t(){var t={restrict:"E",replace:!1,scope:{game:"="},templateUrl:"app/twang/dashboard/dashboard.game.html",controller:e,controllerAs:"vm",bindToController:!0};return t}function e(t){function e(){return t.getByGame(a.game.name,4,0).then(n)}function n(t){a.streams=t.streams}var a=this;a.streams=[],e()}angular.module("twang.dashboard").directive("dashboardGame",t),e.$inject=["blocks.twitch.streams"]}(),function(){"use strict";function t(){var t={restrict:"E",replace:!1,scope:{},templateUrl:"app/twang/dashboard/dashboard.game.list.html",controller:e,controllerAs:"vm",bindToController:!0};return t}function e(t){function e(){return t.getGames().then(n)}function n(t){a.games=t}var a=this;a.games=[],e()}angular.module("twang.dashboard").directive("dashboardGameList",t),e.$inject=["blocks.user.service"]}(),function(){"use strict";function t(t){t.state("twang.dashboard",{url:"/dashboard",views:{"content@":{templateUrl:"app/twang/dashboard/dashboard.html",controller:"twang.dashboard.controller",controllerAs:"vm"}},data:{title:"Dashboard"}})}angular.module("twang.dashboard").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(){var t={restrict:"E",replace:!1,scope:{stream:"=",showGameTitle:"="},templateUrl:"app/twang/dashboard/dashboard.stream.html",controller:e,controllerAs:"vm",bindToController:!0};return t}function e(t){function e(){var e=n.stream.preview.template.replace("{width}","1280").replace("{height}","720");t.show({clickOutsideToClose:!0,template:'<md-dialog aria-label="preview"><md-dialog-content><img src="'+e+'"></md-dialog-content></md-dialog>'})}var n=this;n.showPreview=e}angular.module("twang.dashboard").directive("dashboardStream",t),e.$inject=["$mdDialog"]}(),function(){"use strict";function t(t,e,n){function a(){return e.getGames().then(r)}function r(t){i.games=t}function o(t){return n.games(t)}function s(n){if(n)return e.addGame(n).then(r).then(function(){return t.showSimple(n.name+" added")})}function c(n){if(n)return e.removeGame(n).then(r).then(function(){return t.showSimple(n.name+" removed")})}var i=this;i.games=[],i.search=o,i.add=s,i.remove=c,a()}angular.module("twang.games").controller("twang.games.controller",t),t.$inject=["$mdToast","blocks.user.service","blocks.twitch.search"]}(),function(){"use strict";function t(t){t.state("twang.games",{url:"/games",views:{"content@":{templateUrl:"app/twang/games/games.html",controller:"twang.games.controller",controllerAs:"vm"}},data:{title:"Games"}})}angular.module("twang.games").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e){function n(){t("navigation").toggle()}var a=this;a.state=e,a.toggleNavigation=n}angular.module("twang").controller("twang.header.controller",t),t.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function t(t){function e(){t("navigation").toggle()}var n=this;n.toggleNavigation=e}angular.module("twang").controller("twang.navigation.controller",t),t.$inject=["$mdSidenav"]}(),function(){"use strict";function t(t){t.state("twang",{abstract:!0,views:{"header@":{templateUrl:"app/twang/twang.header.html",controller:"twang.header.controller",controllerAs:"vm"},"navigation@":{templateUrl:"app/twang/twang.navigation.html",controller:"twang.navigation.controller",controllerAs:"vm"}}})}angular.module("twang").config(t),t.$inject=["$stateProvider"]}(),angular.module("app").run(["$templateCache",function(t){t.put("app/twang/channels/channels.html",'<div layout="row" layout-sm="column" layout-xs="column" layout-wrap>\r\n    <md-autocomplete flex="100"\r\n                     md-search-text="searchText"\r\n                     md-selected-item="selectedItem"\r\n                     md-item-text="item.name"\r\n                     md-items="item in vm.search(searchText)"\r\n                     md-delay="200"\r\n                     md-autoselect="true"\r\n                     md-selected-item-change="vm.add(selectedItem); searchText = \'\'; selectedItem = null"\r\n                     placeholder="Add a channel">\r\n        <md-item-template>{{ item.display_name }}</md-item-template>\r\n    </md-autocomplete>\r\n    <div flex flex-gt-sm="50" flex-gt-md="33" ng-repeat="channel in vm.channels | orderBy:\'display_name\'">\r\n        <md-card>\r\n            <md-card-title>\r\n                <md-card-title-text>\r\n                    <span class="md-headline">{{ channel.display_name }}</span>\r\n                </md-card-title-text>\r\n                <md-card-title-media>\r\n                    <img class="md-media-md" ng-src="{{ channel.logo }}">\r\n                </md-card-title-media>\r\n            </md-card-title>\r\n            <md-card-actions layout="row" layout-align="end center">\r\n                <md-button href="{{ channel.url }}" target="_blank">View</md-button>\r\n                <md-button ng-click="vm.remove(channel)">Remove</md-button>\r\n            </md-card-actions>\r\n        </md-card>\r\n    </div>\r\n</div>'),t.put("app/twang/dashboard/dashboard.channel.list.html",'<h3 class="heading">Channels</h3>\r\n<md-divider></md-divider>\r\n<dashboard-stream stream="stream" show-game-title="true" ng-repeat="stream in vm.streams"></dashboard-stream>\r\n'),t.put("app/twang/dashboard/dashboard.game.html",'<h3 class="heading" ng-class="{ \'ng-hide\': vm.streams.length == 0 }">{{ vm.game.name }}</h3>\r\n<md-divider ng-class="{ \'ng-hide\': vm.streams.length == 0 }"></md-divider>\r\n<div ng-class="{ \'ng-hide\': vm.streams.length == 0 }" layout="row" layout-sm="column" layout-xs="column">\r\n    <div flex flex-gt-sm="50" flex-gt-md="25" ng-repeat="stream in vm.streams">\r\n        <dashboard-stream stream="stream" show-game-title="false"></dashboard-stream>\r\n    </div>\r\n</div>\r\n'),t.put("app/twang/dashboard/dashboard.game.list.html",'<dashboard-game game="game" ng-repeat="game in vm.games | orderBy:\'name\'">\r\n</dashboard-game>\r\n\r\n'),t.put("app/twang/dashboard/dashboard.html",'<div layout="row" layout-sm="column" layout-xs="column">\r\n    <div flex flex-gt-sm="25" layout="column" layout-padding>\r\n        <dashboard-channel-list></dashboard-channel-list>\r\n    </div>\r\n    <div flex flex-gt-sm="75" layout="column" layout-padding>\r\n        <dashboard-game-list></dashboard-game-list>\r\n    </div>\r\n</div>'),t.put("app/twang/dashboard/dashboard.stream.html",'<md-card class="stream" ng-class="{ \'not-live\': vm.stream.stream_type !== \'live\' }">\r\n    <img class="md-card-image" ng-src="{{ vm.stream.preview.medium }}" ng-click="vm.showPreview()">\r\n    <md-card-header>\r\n        <md-card-avatar>\r\n            <img ng-src="{{ vm.stream.channel.logo }}">\r\n        </md-card-avatar>\r\n        <md-card-header-text>\r\n            <span class="md-title">{{ vm.stream.channel.display_name }}</span>\r\n            <span class="md-subhead">{{ vm.stream.viewers }} viewers</span>\r\n        </md-card-header-text>\r\n    </md-card-header>\r\n    <md-card-title ng-if="vm.showGameTitle">\r\n        <md-card-title-text>\r\n            <span class="md-headline">{{ vm.stream.game }}</span>\r\n        </md-card-title-text>\r\n    </md-card-title>\r\n    <md-card-content><span>{{ vm.stream.channel.status }}</span></md-card-content>\r\n    <md-card-actions layout="row" layout-align="end center">\r\n        <md-button href="{{ vm.stream.channel.url }}" target="_blank">Watch</md-button>\r\n    </md-card-actions>\r\n</md-card>'),t.put("app/twang/games/games.html",'<div layout="row" layout-sm="column" layout-xs="column" layout-wrap>\r\n    <md-autocomplete flex="100"\r\n                     md-search-text="searchText"\r\n                     md-selected-item="selectedItem"\r\n                     md-item-text="item.name"\r\n                     md-items="item in vm.search(searchText)"\r\n                     md-delay="200"\r\n                     md-autoselect="true"\r\n                     md-selected-item-change="vm.add(selectedItem); searchText = \'\'; selectedItem = null"\r\n                     placeholder="Add a game">\r\n        <md-item-template>{{ item.name }}</md-item-template>\r\n    </md-autocomplete>\r\n    <div flex flex-gt-sm="50" flex-gt-md="33" ng-repeat="game in vm.games | orderBy:\'name\'">\r\n        <md-card>\r\n            <md-card-title>\r\n                <md-card-title-text>\r\n                    <span class="md-headline">{{ game.name }}</span>\r\n                </md-card-title-text>\r\n                <md-card-title-media>\r\n                    <img class="md-media-md" ng-src="{{ game.box.medium }}">\r\n                </md-card-title-media>\r\n            </md-card-title>\r\n            <md-card-actions layout="row" layout-align="end center">\r\n                <md-button href="https://www.twitch.tv/directory/game/{{ game.name }}" target="_blank">View</md-button>\r\n                <md-button ng-click="vm.remove(game)">Remove</md-button>\r\n            </md-card-actions>\r\n        </md-card>\r\n    </div>\r\n</div>'),t.put("app/twang/twang.header.html",'<md-toolbar class="md-hue-1" layout="row">\r\n    <div class="md-toolbar-tools">\r\n        <md-button class="md-icon-button menu" aria-label="menu" hide-gt-sm ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-icon="menu"></md-icon>\r\n        </md-button>\r\n        <h2>{{ vm.state.current.data.title }}</h2>\r\n    </div>\r\n</md-toolbar>\r\n'),t.put("app/twang/twang.navigation.html",'<md-toolbar class="md-hue-3">\r\n    <h3 class="title">TWANG</h3>\r\n</md-toolbar>\r\n<md-divider></md-divider>\r\n<md-list>\r\n    <md-list-item>\r\n        <md-button ui-sref="twang.dashboard" ui-sref-active-eq="selected" ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-src="images/menu.svg"></md-icon>\r\n            Dashboard\r\n        </md-button>\r\n    </md-list-item>\r\n    <md-list-item>\r\n        <md-button ui-sref="twang.channels" ui-sref-active-eq="selected" ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-src="images/menu.svg"></md-icon>\r\n            Channels\r\n        </md-button>\r\n    </md-list-item>\r\n    <md-list-item>\r\n        <md-button ui-sref="twang.games" ui-sref-active-eq="selected" ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-src="images/menu.svg"></md-icon>\r\n            Games\r\n        </md-button>\r\n    </md-list-item>\r\n</md-list>\r\n')}]);