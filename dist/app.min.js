!function(){"use strict";angular.module("app",["ngMaterial","blocks.router","twang"])}(),function(){"use strict";angular.module("blocks.router",["ui.router"])}(),function(){"use strict";angular.module("blocks.twitch",[])}(),function(){"use strict";angular.module("blocks.user",[])}(),function(){"use strict";angular.module("twang.channels",["blocks.user","blocks.twitch"])}(),function(){"use strict";angular.module("twang.dashboard",[])}(),function(){"use strict";angular.module("twang.games",["blocks.user","blocks.twitch"])}(),function(){"use strict";angular.module("twang",["twang.dashboard","twang.channels","twang.games"])}(),function(){"use strict";function t(t){t.icon("menu","images/menu.svg",24)}angular.module("app").config(t),t.$inject=["$mdIconProvider"]}(),function(){"use strict";function t(t){t.theme("default").primaryPalette("grey")}angular.module("app").config(t),t.$inject=["$mdThemingProvider"]}(),function(){"use strict";function t(t){t.otherwise("/dashboard")}angular.module("app").config(t),t.$inject=["$urlRouterProvider"]}(),function(){"use strict";function t(t){t.caseInsensitive(!0),t.strictMode(!1)}angular.module("blocks.router").config(t),t.$inject=["$urlMatcherFactoryProvider"]}(),function(){"use strict";function t(t){function n(n){function e(t){return t.data}var a="https://api.twitch.tv/kraken/channels/"+n;return a+="?callback=JSON_CALLBACK",t.jsonp(a).then(e)}return{getByName:n}}angular.module("blocks.twitch").factory("blocks.twitch.channels",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function n(n,e,a){function r(t){return t.data.streams}var c="https://api.twitch.tv/kraken/search/streams";return c+="?callback=JSON_CALLBACK",c+="&q="+n,e&&(c+="&limit="+e),a&&(c+="&offset="+a),t.jsonp(c).then(r)}function e(n,e){function a(t){return t.data.games}var r="https://api.twitch.tv/kraken/search/games";return r+="?callback=JSON_CALLBACK",r+="&type=suggest",r+="&q="+n,e&&(r+="&live=true"),t.jsonp(r).then(a)}return{streams:n,games:e}}angular.module("blocks.twitch").factory("blocks.twitch.search",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function n(n,e,a){function r(t){return t.data}var c="https://api.twitch.tv/kraken/streams";return c+="?callback=JSON_CALLBACK",c+="&game="+n,e&&(c+="&limit="+e),a&&(c+="&offset="+a),t.jsonp(c).then(r)}function e(n,e,a){function r(t){return t.data}var c="https://api.twitch.tv/kraken/streams";return c+="?callback=JSON_CALLBACK",c+="&channel="+n,e&&(c+="&limit="+e),a&&(c+="&offset="+a),t.jsonp(c).then(r)}return{getByGame:n,getByChannel:e}}angular.module("blocks.twitch").factory("blocks.twitch.streams",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,n){function e(){return g(u(h))}function a(t){return l(h,v,t)}function r(t){return m(h,v,t)}function c(){return g(u(f))}function i(t){return l(f,v,t)}function o(t){return m(f,v,t)}function l(t,n,e){var a=u(t);return s(a,e,n)<0&&(a.push(e),d(t,a)),g(a)}function m(t,n,e){var a=u(t),r=s(a,e,n);return r>=0&&(a.splice(r,1),d(t,a)),g(a)}function s(t,n,e){var a=t.map(function(t){return t[e]});return a.indexOf(n[e])}function u(n){var e=t.localStorage[n]||"[]";return JSON.parse(e)}function d(n,e){t.localStorage[n]=JSON.stringify(e)}function g(t){var e=n.defer();return e.resolve(t),e.promise}var h="twang.channels",f="twang.games",v="name";return{getChannels:e,addChannel:a,removeChannel:r,getGames:c,addGame:i,removeGame:o}}angular.module("blocks.user").factory("blocks.user.service",t),t.$inject=["$window","$q"]}(),function(){"use strict";function t(t,n,e,a,r){function c(){return e.getChannels().then(i)}function i(t){s.channels=t}function o(n){function e(t){var n=t[0],e=t[1].map(function(t){return t.channel});return n&&n._id&&(e=e.filter(function(t){return t.name!=n.name}),e.unshift(n)),e}var c=[r.getByName(n),a.streams(n)];return t.all(c).then(e)}function l(t){if(t)return e.addChannel(t).then(i).then(function(){return n.showSimple(t.display_name+" added")})}function m(t){if(t)return e.removeChannel(t).then(i).then(function(){return n.showSimple(t.display_name+" removed")})}var s=this;s.channels=[],s.search=o,s.add=l,s.remove=m,c()}angular.module("twang.channels").controller("twang.channels.controller",t),t.$inject=["$q","$mdToast","blocks.user.service","blocks.twitch.search","blocks.twitch.channels"]}(),function(){"use strict";function t(t){t.state("twang.channels",{url:"/channels",views:{"content@":{templateUrl:"app/twang/channels/channels.html",controller:"twang.channels.controller",controllerAs:"vm"}},data:{title:"Channels"}})}angular.module("twang.channels").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t){t.state("twang.dashboard",{url:"/dashboard",views:{"content@":{templateUrl:"app/twang/dashboard/dashboard.html"}},data:{title:"Dashboard"}})}angular.module("twang.dashboard").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,n,e){function a(){return n.getGames().then(r)}function r(t){l.games=t}function c(t){return e.games(t)}function i(e){if(e)return n.addGame(e).then(r).then(function(){return t.showSimple(e.name+" added")})}function o(e){if(e)return n.removeGame(e).then(r).then(function(){return t.showSimple(e.name+" removed")})}var l=this;l.games=[],l.search=c,l.add=i,l.remove=o,a()}angular.module("twang.games").controller("twang.games.controller",t),t.$inject=["$mdToast","blocks.user.service","blocks.twitch.search"]}(),function(){"use strict";function t(t){t.state("twang.games",{url:"/games",views:{"content@":{templateUrl:"app/twang/games/games.html",controller:"twang.games.controller",controllerAs:"vm"}},data:{title:"Games"}})}angular.module("twang.games").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,n){function e(){t("navigation").toggle()}var a=this;a.state=n,a.toggleNavigation=e}angular.module("twang").controller("twang.header.controller",t),t.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function t(t){function n(){t("navigation").toggle()}var e=this;e.toggleNavigation=n}angular.module("twang").controller("twang.navigation.controller",t),t.$inject=["$mdSidenav"]}(),function(){"use strict";function t(t){t.state("twang",{abstract:!0,views:{"header@":{templateUrl:"app/twang/twang.header.html",controller:"twang.header.controller",controllerAs:"vm"},"navigation@":{templateUrl:"app/twang/twang.navigation.html",controller:"twang.navigation.controller",controllerAs:"vm"}}})}angular.module("twang").config(t),t.$inject=["$stateProvider"]}(),angular.module("app").run(["$templateCache",function(t){t.put("app/twang/channels/channels.html",'<div layout="row" layout-sm="column" layout-xs="column" layout-wrap>\r\n    <md-autocomplete flex="100"\r\n                     md-search-text="searchText"\r\n                     md-selected-item="selectedItem"\r\n                     md-item-text="item.name"\r\n                     md-items="item in vm.search(searchText)"\r\n                     md-delay="200"\r\n                     md-autoselect="true"\r\n                     md-selected-item-change="vm.add(selectedItem); searchText = \'\'; selectedItem = null"\r\n                     placeholder="Add a channel">\r\n        <md-item-template>{{ item.display_name }}</md-item-template>\r\n    </md-autocomplete>\r\n    <div flex flex-gt-sm="50" flex-gt-md="33" ng-repeat="channel in vm.channels | orderBy:\'display_name\'">\r\n        <md-card>\r\n            <md-card-title>\r\n                <md-card-title-text>\r\n                    <span class="md-headline">{{ channel.display_name }}</span>\r\n                </md-card-title-text>\r\n                <md-card-title-media>\r\n                    <img class="md-media-md" ng-src="{{ channel.logo }}">\r\n                </md-card-title-media>\r\n            </md-card-title>\r\n            <md-card-actions layout="row" layout-align="end center">\r\n                <md-button href="{{ channel.url }}" target="_blank">View</md-button>\r\n                <md-button ng-click="vm.remove(channel)">Remove</md-button>\r\n            </md-card-actions>\r\n        </md-card>\r\n    </div>\r\n</div>'),t.put("app/twang/dashboard/dashboard.html",""),t.put("app/twang/games/games.html",'<div layout="row" layout-sm="column" layout-xs="column" layout-wrap>\r\n    <md-autocomplete flex="100"\r\n                     md-search-text="searchText"\r\n                     md-selected-item="selectedItem"\r\n                     md-item-text="item.name"\r\n                     md-items="item in vm.search(searchText)"\r\n                     md-delay="200"\r\n                     md-autoselect="true"\r\n                     md-selected-item-change="vm.add(selectedItem); searchText = \'\'; selectedItem = null"\r\n                     placeholder="Add a game">\r\n        <md-item-template>{{ item.name }}</md-item-template>\r\n    </md-autocomplete>\r\n    <div flex flex-gt-sm="50" flex-gt-md="33" ng-repeat="game in vm.games | orderBy:\'name\'">\r\n        <md-card>\r\n            <md-card-title>\r\n                <md-card-title-text>\r\n                    <span class="md-headline">{{ game.name }}</span>\r\n                </md-card-title-text>\r\n                <md-card-title-media>\r\n                    <img class="md-media-md" ng-src="{{ game.box.medium }}">\r\n                </md-card-title-media>\r\n            </md-card-title>\r\n            <md-card-actions layout="row" layout-align="end center">\r\n                <md-button href="https://www.twitch.tv/directory/game/{{ game.name }}" target="_blank">View</md-button>\r\n                <md-button ng-click="vm.remove(game)">Remove</md-button>\r\n            </md-card-actions>\r\n        </md-card>\r\n    </div>\r\n</div>'),t.put("app/twang/twang.header.html",'<md-toolbar class="md-hue-1" layout="row">\r\n    <md-button class="menu" aria-label="menu" hide-gt-sm ng-click="vm.toggleNavigation()">\r\n        <md-icon md-svg-icon="menu"></md-icon>\r\n    </md-button>\r\n    <h3>{{ vm.state.current.data.title }}</h3>\r\n</md-toolbar>\r\n'),t.put("app/twang/twang.navigation.html",'<md-toolbar class="md-hue-3">\r\n    <h3>TWANG</h3>\r\n</md-toolbar>\r\n<md-divider></md-divider>\r\n<md-list>\r\n    <md-list-item>\r\n        <md-button ui-sref="twang.dashboard" ui-sref-active-eq="selected" ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-src="images/menu.svg"></md-icon>\r\n            Dashboard\r\n        </md-button>\r\n    </md-list-item>\r\n    <md-list-item>\r\n        <md-button ui-sref="twang.channels" ui-sref-active-eq="selected" ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-src="images/menu.svg"></md-icon>\r\n            Channels\r\n        </md-button>\r\n    </md-list-item>\r\n    <md-list-item>\r\n        <md-button ui-sref="twang.games" ui-sref-active-eq="selected" ng-click="vm.toggleNavigation()">\r\n            <md-icon md-svg-src="images/menu.svg"></md-icon>\r\n            Games\r\n        </md-button>\r\n    </md-list-item>\r\n</md-list>\r\n')}]);