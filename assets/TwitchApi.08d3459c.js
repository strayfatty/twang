const h=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}};h();const c="twitch:user_id",a="twitch:access_token";class g{getUserId(){return localStorage.getItem(c)}setUserId(e){e?localStorage.setItem(c,e):localStorage.removeItem(c)}getAccessToken(){return localStorage.getItem(a)}setAccessToken(e){e?localStorage.setItem(a,e):localStorage.removeItem(a)}}function l(i){const e=[];Object.keys(i||{}).forEach(t=>n(t,i[t]));var r=e.join("&");return r?"?"+r:"";function n(t,o){if(Array.isArray(o))for(let s=0;s<o.length;++s)n(t,o[s]);else if(o!=null){const s=encodeURIComponent(t),d=encodeURIComponent(o);e.push(s+(o!==""?"="+d:""))}}}const u="7ikopbkspr7556owm9krqmalvr2w0i4";class f{constructor(e){this.storage=e}isAuthenticated(){return!!this.storage.getAccessToken()}getLoginUrl(){const r=window.location.origin+window.location.pathname+"signin-complete/";return"https://id.twitch.tv/oauth2/authorize"+l({client_id:u,redirect_uri:r,response_type:"token",scope:"user:read:follows"})}async logout(){this.isAuthenticated()&&await this.revoke(),this.storage.setUserId(null),this.storage.setAccessToken(null)}get_users(e){return this.get("users",e)}get_streams_followed(e){return this.get("streams/followed",e)}async revoke(){const e={client_id:u,token:this.storage.getAccessToken()},r=`https://id.twitch.tv/oauth2/revoke${l(e)}`;await fetch(r,{method:"POST"})}async get(e,r){const n=`https://api.twitch.tv/helix/${e}${l(r)}`;return(await fetch(n,{method:"GET",headers:{Authorization:"Bearer "+this.storage.getAccessToken(),"Client-ID":u}})).json()}}export{g as S,f as T};
